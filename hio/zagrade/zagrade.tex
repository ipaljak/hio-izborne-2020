%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem statement
\begin{statement}[
  problempoints=100,
  timelimit=1 sekunda,
  memorylimit=512 MiB,
]{Zagrade}

Središnja obavještajna agencija (engl.\ \textit{Central Intelligence Agency,
CIA}) je obavještajna služba Sjedinjenih Američkih Država. U njenoj se
nadležnosti primarno nalazi prikupljanje i analiza podataka o stranim
vladama, korporacijama i pojedincima. Nedvojbeno je da CIA prikuplja i analizira
ogromne količine računalnih lozinki domaćih i stranih građana te razvija alate
kojima je moguće kompromitirati još veći broj korporacija i pojedinaca.

Vaš je zadatak jednostavan, kompromitirajte sigurnost središnje obavještajne
agencije. Sretno!

Naravno, budući da su im poznati tipični obrasci izrade računalnih lozinki,
pokušaji poput \texttt{123456}, \texttt{password}, \texttt{1q2w3e4r} ili
\texttt{welcome} neće uroditi plodom. Srećom, tajnim smo kanalima ipak otkrili
neke informacije koje bi vam mogle pomoći.

Naime, njihova se glavna lozinka sastoji od $N$ znakova, pri čemu je $N$ paran
te je točno polovina znakova jednaka otvorenoj zagradi (\texttt{'('}), dok je
druga polovina znakova jednaka zatvorenoj zagradi (\texttt{')'}). Također,
  umjesto uobičajene ''\textit{zaboravili ste lozinku?}'' funkcionalnosti,
inžnjeri su odlučili zaboravljivom administratoru dopustiti da
najviše $K$ puta postavi pitanje oblika: ,,\textit{je li interval lozinke koji
započinje $a$-tim, a završava $b$-tim znakom matematički validan?}''.

Matematičku validnost niza zagrada definiramo induktivno na sljedeći način:

\begin{itemize}
  \item \texttt{()} je matematički validan niz zagrada.
  \item Ako je \texttt{A} matematički validan niz zagrada, tada je i
        \texttt{(A)} matematički validan niz zagrada.
  \item Ako su \texttt{A} i \texttt{B} matematički validni nizovi zagrada,
        tada je i \texttt{AB} matematički validan niz zagrada.
\end{itemize}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Input
\subsection*{Interakcija}
Ovo je interaktivni zadatak. Vaš program treba uspostaviti dijalog sa programom
izrađenim od strane organizatora koji simulira funkcionalnost
\textbf{fiktivnog} nesigurnog poslužitelja središnje obavještajne agencije iz
teksta zadatka.

Prije interakcije vaš program treba sa standardnog ulaza pročitati paran
prirodan broj $N$ koji predstavlja duljinu tajne lozinke.

Nakon toga, vaš program može slati upite pisanjem na stadardni izlaz. Svaki
upit treba biti ispisan u zaseban redak te poprimati oblik ``\textit{? a b}''
gdje vrijedi $1 \le a \le b \le N$. Nakon svakog ispisanog upita, vaš program
treba napraviti \textit{flush} izlaza te sa standardnog ulaza pročitati
\textit{odgovor} na upit -- broj $1$ ako je interval lozinke koji započinje
$a$-tim, a završava $b$-tim znakom matematički validan, odnosno $0$ ako to
nije. Vaš program smije poslati najviše $K$ upita (pogledajte poglavlje o
bodovanju).

Kada je vaš program odgonetnuo tajnu lozinku, treba na standardni izlaz
ispisati red oblika ``\textit{! $x_1x_2\dots x_N$}'' gdje znakovi $x_1$,
$x_2$, \dots, $x_N$ predstavljaju znakove tajne lozinke. Nakon toga, vaš
program ponovno treba napraviti \textit{flush} izlaza i završiti izvođenje.

\textbf{Napomena:} putem sustava za evaluaciju možete preuzeti primjere
izvornih kodova koji na ispravan način obavljaju interakciju, uključujući
\textit{flush} izlaza.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Scoring
\subsection*{Bodovanje}
{\renewcommand{\arraystretch}{1.4}
  \setlength{\tabcolsep}{6pt}
  \begin{tabular}{ccl}
 Podzadatak & Broj bodova & Ograničenja \\ \midrule
    1 & ?? & $1 \le N \le 1\,000$, $K = \frac{N\cdot(N-1)}{2}$, cijela lozinka je matematički validan niz. \\
    2 & ?? & $1 \le N \le 1\,000$, $K = \frac{N\cdot(N-1)}{2}$ \\
    3 & ?? & $1 \le N \le 1\,000\,000 $, $K = N - 1$, cijela lozinka je matematički validan niz. \\
    4 & ?? & $1 \le N \le 1\,000\,000 $, $K = N - 1$ \\
\end{tabular}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Examples
\subsection*{Primjer interakcije}
{\renewcommand{\arraystretch}{1.4}
  \setlength{\tabcolsep}{6pt}
  \begin{tabular}{lcl}
 Izlaz & Ulaz & Napomna \\ \midrule
      & 6 & Tajna lozinka je \texttt{((()))} \\
    \texttt{\frenchspacing? 1 6} & \texttt{1} & Cijela lozinka je matematički validan niz zagrada \\
    \texttt{\frenchspacing? 1 2} & \texttt{0} & \texttt{((} nije matematički validan niz zagrada \\
    \texttt{\frenchspacing? 2 4} & \texttt{0} & \texttt{(()} nije matematički validan niz zagrada \\
    \texttt{\frenchspacing? 2 5} & \texttt{1} & \texttt{(())} je matematički validan niz zagrada \\
    \texttt{\frenchspacing? 3 4} & \texttt{1} & \texttt{()} je matematički validan niz zagrada \\
    \texttt{\frenchspacing! ((()))} & & Lozinka je uspješno odgonetnuta i CIA je komprimitirana. \\
\end{tabular}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% We're done
\end{statement}

%%% Local Variables:
%%% mode: latex
%%% mode: flyspell
%%% ispell-local-dictionary: "croatian"
%%% TeX-master: "../hio.tex"
%%% End:
